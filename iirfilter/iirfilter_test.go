package iirfilter

import (
	"testing"

	"github.com/dhinojosac/godsp/iirfilter"
)

var inputTest []float64 = []float64{8007.000000000, 8623.000000000, 8616.000000000, 7680.000000000, 8496.000000000, 8241.000000000, 7460.000000000, 8305.000000000, 7995.000000000, 7418.000000000, 8502.000000000, 8082.000000000, 7576.000000000, 8796.000000000, 8039.000000000, 7407.000000000, 8431.000000000, 7984.000000000, 7360.000000000, 8515.000000000, 7859.000000000, 7267.000000000, 8413.000000000, 7666.000000000, 7239.000000000, 8325.000000000, 7481.000000000, 7319.000000000, 8258.000000000, 7433.000000000, 7458.000000000, 8272.000000000, 7394.000000000, 7474.000000000, 8150.000000000, 7144.000000000, 7437.000000000, 8087.000000000, 6935.000000000, 7462.000000000, 7953.000000000, 6899.000000000, 7575.000000000, 7811.000000000, 6841.000000000, 7304.000000000, 7821.000000000, 6792.000000000, 7442.000000000, 8012.000000000}

var sosTest [][]float64 = [][]float64{
	{1.000000000, -0.662545476, 1.000000000, 1.000000000, -1.800924469, 0.831128711},
	{1.000000000, -1.705327546, 1.000000000, 1.000000000, -1.800524353, 0.874360793},
	{1.000000000, -1.999907547, 1.000000000, 1.000000000, -1.921319658, 0.926692121},
	{1.000000000, -1.819789438, 1.000000000, 1.000000000, -1.835909671, 0.940934118},
	{1.000000000, -1.999416103, 1.000000000, 1.000000000, -1.974803148, 0.977086804},
	{1.000000000, -1.845642825, 1.000000000, 1.000000000, -1.864612436, 0.983820606},
	{1.000000000, -1.999015841, 1.000000000, 1.000000000, -1.990704014, 0.992367080},
	{1.000000000, -1.998843277, 1.000000000, 1.000000000, -1.996655164, 0.998152525},
}

var gainTest float64 = 0.001266188
var orderTest int = 16

func TestFiltfilt(t *testing.T) {

	output, err := iirfilter.Filfilt(sosTest, gainTest, orderTest, inputTest)
	if err != nil {
		t.Error("error %v", err)
	}
}
